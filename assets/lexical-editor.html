<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Lexical Editor</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        background: #f7f7f7;
        font-family: "Baloo 2", "Baloo2", Arial, sans-serif;
        color: #29375c;
        width: 100vw;
        overflow-x: hidden;
      }
      .toolbar {
        display: flex;
        gap: 14px;
        padding: 12px 5px 0px 2px;
        justify-content: space-between;
        align-items: center;
        min-height: 48px;
        box-sizing: border-box;
        background: #f7f7f7;
        margin-bottom: 20px;
        width: 100vw;
        max-width: 100vw;
        position: sticky;
        top: 0;
        z-index: 10;
      }
      .editor-wrap {
        box-sizing: border-box;
        margin: 0;
        width: 100vw;
        max-width: 100vw;
      }
      .editor-scroll {
        height: 100vh;
        min-height: 100vh;
        overflow-y: auto;
        width: 100vw;
        max-width: 100vw;
        box-sizing: border-box;
      }
      .tool-btn {
        width: 36px;
        height: 36px;
        border: none;
        background: transparent;
        color: #29375c;
        font-size: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.18s, box-shadow 0.18s;
        cursor: pointer;
        outline: none;
        font-family: "Baloo 2", "Baloo2", Arial, sans-serif;
        font-weight: 700;
      }
      .tool-btn.active,
      .tool-btn:active {
        background: #d1d5db;
        box-shadow: 0 2px 8px #29375c22;
      }
      .tool-btn:focus {
        box-shadow: 0 0 0 2px #29375c33;
      }
      #editor {
        min-height: 100vh;
        height: 100%;
        padding: 16px 14px 12px 14px;
        outline: none;
        font-size: 18px;
        background: transparent;
        border: none;
        width: 100vw;
        max-width: 100vw;
        color: #29375c;
        margin-top: 0;
        font-family: "Baloo 2", "Baloo2", Arial, sans-serif;
        font-weight: 500;
        line-height: 1.6;
        border-radius: 12px;
        background: #f7f7f7;
      }
      #editor:empty:before {
        content: attr(data-placeholder);
        pointer-events: none;
        font-size: 17px;
        font-style: normal;
        font-family: "Baloo 2", "Baloo2", Arial, sans-serif;
      }
      html,
      body,
      .editor-wrap,
      .editor-scroll,
      #editor {
        width: 100vw;
        max-width: 100vw;
        max-height: 100vh;
        height: 100vh;
        overflow-x: hidden;
        box-sizing: border-box;
      }
      @media (max-width: 480px) {
        .toolbar,
        .editor-wrap {
          width: 99.5%;
        }
        .editor-scroll {
          height: 170px;
        }
        #editor {
          font-size: 16px;
          padding: 12px 8px;
        }
      }
    </style>
  </head>
  <body>
    <div class="toolbar">
      <button
        class="tool-btn"
        onclick="document.execCommand('italic', false, null)"
        title="In nghiÃªng"
      >
        <i>I</i>
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('bold', false, null)"
        title="In Ä‘áº­m"
      >
        <b>B</b>
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('underline', false, null)"
        title="Gáº¡ch chÃ¢n"
      >
        <u>U</u>
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('strikethrough', false, null)"
        title="Gáº¡ch ngang"
      >
        <span style="text-decoration: line-through">U</span>
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('insertLink', false, null)"
        title="ChÃ¨n liÃªn káº¿t"
      >
        ðŸ”—
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('insertUnorderedList', false, null)"
        title="Danh sÃ¡ch cháº¥m"
      >
        â€¢
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('justifyLeft', false, null)"
        title="CÄƒn trÃ¡i"
      >
        L
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('justifyCenter', false, null)"
        title="CÄƒn giá»¯a"
      >
        C
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('justifyRight', false, null)"
        title="CÄƒn pháº£i"
      >
        R
      </button>
      <button
        class="tool-btn"
        onclick="document.execCommand('insertOrderedList', false, null)"
        title="Danh sÃ¡ch sá»‘"
      >
        #
      </button>
    </div>
    <div class="editor-wrap">
      <div class="editor-scroll">
        <div
          id="editor"
          contenteditable="true"
          data-placeholder="Nháº­p ná»™i dung tin tá»©c..."
        ></div>
      </div>
    </div>
    <script>
      const editor = document.getElementById("editor");
      editor.addEventListener("input", function () {
        if (window.ReactNativeWebView) {
          window.ReactNativeWebView.postMessage(editor.innerHTML);
        }
      });
      let initialSet = false;
      window.document.addEventListener("message", function (event) {
        if (!initialSet && event.data) {
          editor.innerHTML = event.data;
          initialSet = true;
        }
      });
      window.addEventListener("message", function (event) {
        if (!initialSet && event.data) {
          editor.innerHTML = event.data;
          initialSet = true;
        }
      });
      document.querySelectorAll(".tool-btn").forEach((btn) => {
        btn.addEventListener("mousedown", (e) => {
          btn.classList.add("active");
        });
        btn.addEventListener("mouseup", (e) => {
          setTimeout(() => btn.classList.remove("active"), 150);
        });
        btn.addEventListener("mouseleave", (e) => {
          btn.classList.remove("active");
        });
      });
      document
        .getElementById("done-btn")
        .addEventListener("click", function () {
          if (window.ReactNativeWebView) {
            window.ReactNativeWebView.postMessage("__BLUR__");
          }
        });
    </script>
  </body>
</html>
